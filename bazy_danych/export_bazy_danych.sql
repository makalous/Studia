--------------------------------------------------------
--  File created - œroda-czerwca-03-2015   
--------------------------------------------------------
--------------------------------------------------------
--  DDL for Table DENACI
--------------------------------------------------------

  CREATE TABLE "DENACI" 
   (	"PESEL_DENATA" NUMBER(11,0), 
	"IMIE_DENATA" VARCHAR2(32 BYTE), 
	"NAZWISKO_DENATA" VARCHAR2(32 BYTE), 
	"PLEC_DENATA" CHAR(1 BYTE), 
	"PRACA_DENATA" VARCHAR2(32 BYTE), 
	"DATA_UR" DATE, 
	"DATA_SM" DATE
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PLATNOSCI
--------------------------------------------------------

  CREATE TABLE "PLATNOSCI" 
   (	"ID_RACHUNKU" NUMBER(6,0), 
	"ID_SPRAWY" NUMBER(5,0), 
	"CENA" NUMBER(6,2), 
	"CZY_PRZELEWEM" CHAR(1 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table PRACOWNICY
--------------------------------------------------------

  CREATE TABLE "PRACOWNICY" 
   (	"PESEL_PRACOWNIKA" NUMBER(11,0), 
	"IMIE_PRACOWNIKA" VARCHAR2(32 BYTE), 
	"NAZWISKO_PRACOWNIKA" VARCHAR2(32 BYTE), 
	"PLEC_PRACOWNIKA" CHAR(1 BYTE), 
	"ZAROBKI_PRACOWNIKA" NUMBER(6,2), 
	"DATA_ZAT" DATE, 
	"DATA_ZWOL" DATE DEFAULT '2055-02-01'
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table REGIONY
--------------------------------------------------------

  CREATE TABLE "REGIONY" 
   (	"KOD_POCZTOWY" NUMBER(5,0), 
	"MIASTO" VARCHAR2(32 BYTE), 
	"PANSTWO" VARCHAR2(32 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table SPRAWY
--------------------------------------------------------

  CREATE TABLE "SPRAWY" 
   (	"ID_SPRAWY" NUMBER(5,0), 
	"ID_ZAKLADU" NUMBER(4,0), 
	"DATA_REALIZACJI" DATE, 
	"CZY_ZAKONCZONA" CHAR(1 BYTE), 
	"PESEL_DENATA" NUMBER(11,0), 
	"PESEL_PRACOWNIKA" NUMBER(11,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ZAKLADY
--------------------------------------------------------

  CREATE TABLE "ZAKLADY" 
   (	"ID_ZAKLADU" NUMBER(4,0), 
	"KOD_POCZTOWY" NUMBER(5,0)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
--------------------------------------------------------
--  DDL for Table ZMIANA_SPRAWY
--------------------------------------------------------

  CREATE TABLE "ZMIANA_SPRAWY" 
   (	"DATA_ZMIANY" DATE, 
	"ZMIANA" VARCHAR2(16 BYTE)
   ) SEGMENT CREATION IMMEDIATE 
  PCTFREE 10 PCTUSED 40 INITRANS 1 MAXTRANS 255 NOCOMPRESS LOGGING
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS" ;
REM INSERTING into DENACI
SET DEFINE OFF;
Insert into DENACI (PESEL_DENATA,IMIE_DENATA,NAZWISKO_DENATA,PLEC_DENATA,PRACA_DENATA,DATA_UR,DATA_SM) values ('94110816765','Ryszard','Butwock','M','Lekarz',to_date('94/11/08','RR/MM/DD'),to_date('15/08/09','RR/MM/DD'));
Insert into DENACI (PESEL_DENATA,IMIE_DENATA,NAZWISKO_DENATA,PLEC_DENATA,PRACA_DENATA,DATA_UR,DATA_SM) values ('87060789109','Gra¿yna','Konowal','K','Piekarz',to_date('87/06/07','RR/MM/DD'),to_date('14/11/19','RR/MM/DD'));
Insert into DENACI (PESEL_DENATA,IMIE_DENATA,NAZWISKO_DENATA,PLEC_DENATA,PRACA_DENATA,DATA_UR,DATA_SM) values ('43051598654','Michal','Bialek','M','Programista',to_date('43/05/15','RR/MM/DD'),to_date('14/12/09','RR/MM/DD'));
Insert into DENACI (PESEL_DENATA,IMIE_DENATA,NAZWISKO_DENATA,PLEC_DENATA,PRACA_DENATA,DATA_UR,DATA_SM) values ('76081154032','Halina','Frackowiak','K','Posel',to_date('76/08/11','RR/MM/DD'),to_date('13/02/01','RR/MM/DD'));
REM INSERTING into PLATNOSCI
SET DEFINE OFF;
Insert into PLATNOSCI (ID_RACHUNKU,ID_SPRAWY,CENA,CZY_PRZELEWEM) values ('234001','435','4500,76','N');
Insert into PLATNOSCI (ID_RACHUNKU,ID_SPRAWY,CENA,CZY_PRZELEWEM) values ('752','1098','5270','T');
Insert into PLATNOSCI (ID_RACHUNKU,ID_SPRAWY,CENA,CZY_PRZELEWEM) values ('870921','1102','3298,21','T');
REM INSERTING into PRACOWNICY
SET DEFINE OFF;
Insert into PRACOWNICY (PESEL_PRACOWNIKA,IMIE_PRACOWNIKA,NAZWISKO_PRACOWNIKA,PLEC_PRACOWNIKA,ZAROBKI_PRACOWNIKA,DATA_ZAT,DATA_ZWOL) values ('90080576143','Karel','Onkelbaum','M','2059,76',to_date('00/10/15','RR/MM/DD'),to_date('55/02/01','RR/MM/DD'));
Insert into PRACOWNICY (PESEL_PRACOWNIKA,IMIE_PRACOWNIKA,NAZWISKO_PRACOWNIKA,PLEC_PRACOWNIKA,ZAROBKI_PRACOWNIKA,DATA_ZAT,DATA_ZWOL) values ('87060789654','Dominika','Werter','K','2059,76',to_date('11/07/11','RR/MM/DD'),to_date('12/08/09','RR/MM/DD'));
Insert into PRACOWNICY (PESEL_PRACOWNIKA,IMIE_PRACOWNIKA,NAZWISKO_PRACOWNIKA,PLEC_PRACOWNIKA,ZAROBKI_PRACOWNIKA,DATA_ZAT,DATA_ZWOL) values ('59080276549','Karolina','Kowalska','K','2059,76',to_date('02/12/08','RR/MM/DD'),to_date('55/02/01','RR/MM/DD'));
Insert into PRACOWNICY (PESEL_PRACOWNIKA,IMIE_PRACOWNIKA,NAZWISKO_PRACOWNIKA,PLEC_PRACOWNIKA,ZAROBKI_PRACOWNIKA,DATA_ZAT,DATA_ZWOL) values ('68111123456','Maciej','Kielecki','M','2059,76',to_date('99/06/19','RR/MM/DD'),to_date('55/02/01','RR/MM/DD'));
REM INSERTING into REGIONY
SET DEFINE OFF;
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('50876','Wroclaw','Polska');
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('11876','Bialystok','Polska');
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('23675','Warszawa','Polska');
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('8976','Praga','Czechy');
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('76890','Szczecin','Polska');
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('15156','Cieszyn','Polska');
Insert into REGIONY (KOD_POCZTOWY,MIASTO,PANSTWO) values ('56098','Wroclaw','Polska');
REM INSERTING into SPRAWY
SET DEFINE OFF;
Insert into SPRAWY (ID_SPRAWY,ID_ZAKLADU,DATA_REALIZACJI,CZY_ZAKONCZONA,PESEL_DENATA,PESEL_PRACOWNIKA) values ('115','2',to_date('15/08/09','RR/MM/DD'),'T','76081154032','90080576143');
Insert into SPRAWY (ID_SPRAWY,ID_ZAKLADU,DATA_REALIZACJI,CZY_ZAKONCZONA,PESEL_DENATA,PESEL_PRACOWNIKA) values ('435','2',to_date('15/08/12','RR/MM/DD'),'T','94110816765','90080576143');
Insert into SPRAWY (ID_SPRAWY,ID_ZAKLADU,DATA_REALIZACJI,CZY_ZAKONCZONA,PESEL_DENATA,PESEL_PRACOWNIKA) values ('1098','2',to_date('14/11/24','RR/MM/DD'),'T','87060789109','90080576143');
Insert into SPRAWY (ID_SPRAWY,ID_ZAKLADU,DATA_REALIZACJI,CZY_ZAKONCZONA,PESEL_DENATA,PESEL_PRACOWNIKA) values ('1102','11',to_date('14/12/15','RR/MM/DD'),'T','43051598654','68111123456');
REM INSERTING into ZAKLADY
SET DEFINE OFF;
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('76','56098');
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('54','15156');
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('187','76890');
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('2034','8976');
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('11','23675');
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('99','11876');
Insert into ZAKLADY (ID_ZAKLADU,KOD_POCZTOWY) values ('2','50876');
REM INSERTING into ZMIANA_SPRAWY
SET DEFINE OFF;
Insert into ZMIANA_SPRAWY (DATA_ZMIANY,ZMIANA) values (to_date('15/06/03','RR/MM/DD'),'WSTAWIENIE');
--------------------------------------------------------
--  Constraints for Table PLATNOSCI
--------------------------------------------------------

  ALTER TABLE "PLATNOSCI" MODIFY ("ID_SPRAWY" NOT NULL ENABLE);
  ALTER TABLE "PLATNOSCI" MODIFY ("CENA" NOT NULL ENABLE);
  ALTER TABLE "PLATNOSCI" MODIFY ("CZY_PRZELEWEM" NOT NULL ENABLE);
  ALTER TABLE "PLATNOSCI" ADD CHECK (czy_przelewem='T' or czy_przelewem='N') ENABLE;
  ALTER TABLE "PLATNOSCI" ADD PRIMARY KEY ("ID_RACHUNKU")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table REGIONY
--------------------------------------------------------

  ALTER TABLE "REGIONY" MODIFY ("MIASTO" NOT NULL ENABLE);
  ALTER TABLE "REGIONY" MODIFY ("PANSTWO" NOT NULL ENABLE);
  ALTER TABLE "REGIONY" ADD PRIMARY KEY ("KOD_POCZTOWY")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table SPRAWY
--------------------------------------------------------

  ALTER TABLE "SPRAWY" MODIFY ("ID_ZAKLADU" NOT NULL ENABLE);
  ALTER TABLE "SPRAWY" MODIFY ("CZY_ZAKONCZONA" NOT NULL ENABLE);
  ALTER TABLE "SPRAWY" MODIFY ("PESEL_DENATA" NOT NULL ENABLE);
  ALTER TABLE "SPRAWY" MODIFY ("PESEL_PRACOWNIKA" NOT NULL ENABLE);
  ALTER TABLE "SPRAWY" ADD CHECK (czy_zakonczona='T' or czy_zakonczona='N') ENABLE;
  ALTER TABLE "SPRAWY" ADD PRIMARY KEY ("ID_SPRAWY")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table ZAKLADY
--------------------------------------------------------

  ALTER TABLE "ZAKLADY" MODIFY ("KOD_POCZTOWY" NOT NULL ENABLE);
  ALTER TABLE "ZAKLADY" ADD PRIMARY KEY ("ID_ZAKLADU")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table DENACI
--------------------------------------------------------

  ALTER TABLE "DENACI" MODIFY ("IMIE_DENATA" NOT NULL ENABLE);
  ALTER TABLE "DENACI" MODIFY ("NAZWISKO_DENATA" NOT NULL ENABLE);
  ALTER TABLE "DENACI" MODIFY ("PLEC_DENATA" NOT NULL ENABLE);
  ALTER TABLE "DENACI" MODIFY ("PRACA_DENATA" NOT NULL ENABLE);
  ALTER TABLE "DENACI" MODIFY ("DATA_UR" NOT NULL ENABLE);
  ALTER TABLE "DENACI" MODIFY ("DATA_SM" NOT NULL ENABLE);
  ALTER TABLE "DENACI" ADD CHECK (plec_denata='K' or plec_denata='M') ENABLE;
  ALTER TABLE "DENACI" ADD PRIMARY KEY ("PESEL_DENATA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Constraints for Table PRACOWNICY
--------------------------------------------------------

  ALTER TABLE "PRACOWNICY" MODIFY ("IMIE_PRACOWNIKA" NOT NULL ENABLE);
  ALTER TABLE "PRACOWNICY" MODIFY ("NAZWISKO_PRACOWNIKA" NOT NULL ENABLE);
  ALTER TABLE "PRACOWNICY" MODIFY ("PLEC_PRACOWNIKA" NOT NULL ENABLE);
  ALTER TABLE "PRACOWNICY" MODIFY ("ZAROBKI_PRACOWNIKA" NOT NULL ENABLE);
  ALTER TABLE "PRACOWNICY" MODIFY ("DATA_ZAT" NOT NULL ENABLE);
  ALTER TABLE "PRACOWNICY" ADD CHECK (plec_pracownika='K' or plec_pracownika='M') ENABLE;
  ALTER TABLE "PRACOWNICY" ADD PRIMARY KEY ("PESEL_PRACOWNIKA")
  USING INDEX PCTFREE 10 INITRANS 2 MAXTRANS 255 COMPUTE STATISTICS 
  STORAGE(INITIAL 65536 NEXT 1048576 MINEXTENTS 1 MAXEXTENTS 2147483645
  PCTINCREASE 0 FREELISTS 1 FREELIST GROUPS 1 BUFFER_POOL DEFAULT FLASH_CACHE DEFAULT CELL_FLASH_CACHE DEFAULT)
  TABLESPACE "USERS"  ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table PLATNOSCI
--------------------------------------------------------

  ALTER TABLE "PLATNOSCI" ADD CONSTRAINT "ID_SPRAWY" FOREIGN KEY ("ID_SPRAWY")
	  REFERENCES "SPRAWY" ("ID_SPRAWY") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table SPRAWY
--------------------------------------------------------

  ALTER TABLE "SPRAWY" ADD CONSTRAINT "ID_ZAKLADU" FOREIGN KEY ("ID_ZAKLADU")
	  REFERENCES "ZAKLADY" ("ID_ZAKLADU") ENABLE;
  ALTER TABLE "SPRAWY" ADD CONSTRAINT "PESEL_DENATA" FOREIGN KEY ("PESEL_DENATA")
	  REFERENCES "DENACI" ("PESEL_DENATA") ENABLE;
  ALTER TABLE "SPRAWY" ADD CONSTRAINT "PESEL_PRACOWNIKA" FOREIGN KEY ("PESEL_PRACOWNIKA")
	  REFERENCES "PRACOWNICY" ("PESEL_PRACOWNIKA") ENABLE;
--------------------------------------------------------
--  Ref Constraints for Table ZAKLADY
--------------------------------------------------------

  ALTER TABLE "ZAKLADY" ADD CONSTRAINT "KOD_POCZTOWY" FOREIGN KEY ("KOD_POCZTOWY")
	  REFERENCES "REGIONY" ("KOD_POCZTOWY") ENABLE;
--------------------------------------------------------
--  DDL for Trigger Z_SPRAWY
--------------------------------------------------------

  CREATE OR REPLACE TRIGGER "Z_SPRAWY" AFTER UPDATE OR INSERT OR DELETE ON sprawy
DECLARE
  akcja VARCHAR2(16);
BEGIN
  IF UPDATING THEN
    akcja:='AKTUALIZACJA';
  END IF;
  IF INSERTING THEN
    akcja:='WSTAWIENIE';
  END IF;
  IF DELETING THEN
    akcja:='USUNIÊCIE';
  END IF;
  INSERT INTO zmiana_sprawy VALUES( SYSDATE, akcja );
END;
/
ALTER TRIGGER "Z_SPRAWY" ENABLE;
